---
title: API Kayser
description: API para gestión de autenticación y consulta de tiendas con stock disponible
template: splash
---

import { Card, CardGrid } from '@astrojs/starlight/components';


## Autenticación

<Card title="Bearer Authentication" >

Todos los endpoints protegidos requieren un token JWT obtenido desde el endpoint de autenticación.

<div style="background: #f6f8fa; padding: 1.5rem; border-radius: 8px; border-left: 4px solid #667eea; margin-top: 1rem;">

- **Tipo:** HTTP Bearer
- **Formato:** JWT
- **Header:** `Authorization: Bearer {token}`

</div>

</Card>

---

## Endpoints

### <span style="color: #667eea;">Obtener Token de Acceso</span>

Genera un token JWT para acceder a endpoints protegidos.

<div style="background: linear-gradient(to right, #667eea, #764ba2); color: white; padding: 0.75rem 1.5rem; border-radius: 6px; display: inline-block; font-weight: 600; margin: 1rem 0;">
  POST /auth/token
</div>

#### Request Body

```json
{
  "client_id": "cliente_api_001",
  "client_secret": "secret123"
}
```

<div style="overflow-x: auto;">

| Campo | Tipo | Requerido | Descripción |
|-------|------|-----------|-------------|
| `client_id` | string | Sí | ID del cliente |
| `client_secret` | string | Sí | Secreto del cliente |

</div>

#### Respuestas

<div style="border-left: 4px solid #10b981; padding-left: 1rem; margin: 1.5rem 0;">

**200 - Autenticación exitosa**

```json
{
  "ok": true,
  "message": "Autenticación exitosa",
  "data": {
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "token_type": "Bearer",
    "expires_in": 600
  }
}
```

</div>

<div style="border-left: 4px solid #f59e0b; padding-left: 1rem; margin: 1.5rem 0;">

**400 - Credenciales incompletas**

```json
{
  "ok": false,
  "message": "Credenciales incompletas",
  "data": {
    "cod": "INVALID_CREDENTIALS"
  }
}
```

</div>

<div style="border-left: 4px solid #ef4444; padding-left: 1rem; margin: 1.5rem 0;">

**401 - Credenciales inválidas**

```json
{
  "ok": false,
  "message": "Credenciales inválidas",
  "data": {
    "cod": "UNAUTHORIZED"
  }
}
```

</div>

---

### <span style="color: #667eea;">Obtener Tiendas con Stock</span>

Consulta tiendas con stock disponible para un producto específico.

<div style="background: linear-gradient(to right, #667eea, #764ba2); color: white; padding: 0.75rem 1.5rem; border-radius: 6px; display: inline-block; font-weight: 600; margin: 1rem 0;">
  POST /api/v1/bot/tiendas_disponibles
</div>

<div style="background: #fef3c7; border: 1px solid #f59e0b; padding: 0.75rem 1rem; border-radius: 6px; margin: 1rem 0;">
  
**Autenticación requerida:** Bearer Token

</div>


<CardGrid>
  <Card title="Body">
```json
{
  "sku": "7800010492139",
  "sku_padre": "50.200",
  "location": {
    "lat": -12.0464,
    "lng": -77.0428
  },
  "storeName":"KAYSER LURIN - KAYSER",
  "storeQnty":5
}


```
  </Card>

	  <Card title="Headers">
```json
 {
    "Content-Type": "application/json",
    "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
```
  </Card>

</CardGrid>


<div style="overflow-x: auto;">

| Campo | Tipo | Requerido | Descripción |
|-------|------|-----------|-------------|
| `sku` | string | Condicional | Código SKU del producto (enviar `sku` o `sku_padre`; al menos uno es obligatorio). |
| `sku_padre` | string | Condicional | Código SKU padre del producto (enviar `sku` o `sku_padre`; al menos uno es obligatorio). |
| `location` | object | Sí | Ubicación geográfica |
| `location.lat` | number | Sí | Latitud |
| `location.lng` | number | Sí | Longitud |
| `storeName` | string | NO | Nombre de la tienda |
| `storeQnty` | integer | NO | Cantidad de unidades en stock en la tienda (valor por defecto: 5) |

</div>

#### Respuestas

<div style="border-left: 4px solid #10b981; padding-left: 1rem; margin: 1.5rem 0;">

**200 - Tiendas con stock**

```json
{
  "ok": true,
  "message": "Tiendas con Stock",
  "data": {
    "tiendas_encontradas": 62,
    "tiendas": [
      {
        "cod_tienda": "ALM220",
        "nombre_tienda": "CANALES WEB KAYSER",
        "distancia_km": 0,
        "productos": [
          {
            "sku": "7800010492139",
            "cod_producto": "50.200-BEI-XL",
            "color": "BEIGE",
            "talla": "XL",
            "marca": "KAYSER",
            "precio": 49.9,
            "imagen_url": "https://...",
            "stock": 12
          }
        ]
      },
			{
			 ...
			}
    ]
  }
}
```

</div>

<div style="border-left: 4px solid #f59e0b; padding-left: 1rem; margin: 1.5rem 0;">

**400 - Parámetros inválidos**

```json
{
  "ok": false,
  "message": "Parámetros inválidos",
  "data": {
    "cod": "INVALID_PARAMS"
  }
}
```

</div>

<div style="border-left: 4px solid #ef4444; padding-left: 1rem; margin: 1.5rem 0;">

**401 - No autorizado**

```json
{
  "ok": false,
  "message": "No autorizado",
  "data": {
    "cod": "UNAUTHORIZED"
  }
}
```

</div>

<div style="border-left: 4px solid #ef4444; padding-left: 1rem; margin: 1.5rem 0;">

**500 - Error interno**

```json
{
  "ok": false,
  "message": "Error interno del servidor",
  "data": {
    "cod": "INTERNAL_ERROR"
  }
}
```

</div>

---

## Modelos de Datos

<CardGrid>

<Card title="ErrorResponse">

<div style="overflow-x: auto;">

| Campo | Tipo | Descripción |
|-------|------|-------------|
| `ok` | boolean | Estado de la operación |
| `message` | string | Mensaje descriptivo del error |
| `data.cod` | string | Código del error |

</div>

</Card>

<Card title="AuthTokenResponse">

<div style="overflow-x: auto;">

| Campo | Tipo | Descripción |
|-------|------|-------------|
| `ok` | boolean | Estado de la operación |
| `message` | string | Mensaje descriptivo |
| `data.access_token` | string | Token JWT de acceso |
| `data.token_type` | string | Tipo de token (Bearer) |
| `data.expires_in` | integer | Tiempo de expiración en segundos |

</div>

</Card>

<Card title="Store">

<div style="overflow-x: auto;">

| Campo | Tipo | Descripción |
|-------|------|-------------|
| `cod_tienda` | string | Código de la tienda |
| `nombre_tienda` | string | Nombre de la tienda |
| `distancia_km` | number | Distancia en kilómetros |
| `productos` | array | Lista de productos disponibles |

</div>

</Card>

<Card title="Product">

<div style="overflow-x: auto;">

| Campo | Tipo | Descripción |
|-------|------|-------------|
| `sku` | string | Código SKU del producto |
| `cod_producto` | string | Código del producto |
| `color` | string | Color del producto |
| `talla` | string | Talla del producto |
| `marca` | string | Marca del producto |
| `precio` | number | Precio del producto |
| `imagen_url` | string | URL de la imagen |
| `stock` | integer | Cantidad en stock |

</div>

</Card>

</CardGrid>

---